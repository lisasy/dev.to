<%# missing cache key %>
<% siblings = notification.json_data["reaction"]["aggregated_siblings"].select { |n| n["created_at"] > 24.hours.ago } %>
  <div class="notification-item--meta">
<% if siblings.length == 0 %>
    <% cache "activity-profile-pic-#{notification.json_data['user']['id']}-#{notification.json_data['user']['profile_image_90']}" do %>
      <a href="<%= notification.json_data["user"]["path"] %>">
        <figure class="crayons-avatar crayons-avatar--l mr-2">
          <img src="<%= notification.json_data["user"]["profile_image_90"] %>" alt="link to <%= notification.json_data["user"]["username"] %> profile" class="crayons-avatar__image">
        </figure>
      </a>
    <% end %>

    <div class="notification-meta--title">
      <a href="<%= notification.json_data["user"]["path"] %>"><%= notification.json_data["user"]["name"] %></a> reacted to

        <a href="<%= notification.json_data["reaction"]["reactable"]["path"] %>" class="notification-comment-reacted-link">
          <%# title is blank when it's a comment with only an image, for example %>
          <%= notification.json_data["reaction"]["reactable"]["title"].blank? ? "your #{notification.json_data['reaction']['reactable_type'].downcase}" : sanitize(notification.json_data["reaction"]["reactable"]["title"]) %>
        </a>

      <span class="notification-reaction-inline">
          <% category = notification.json_data["reaction"]["category"] %>
          with <%= image_tag(ReactionImage.new(category).path, class: "notification-reaction-inline__image", alt: "a #{category.humanize}") %>
        </span>
    </div>

  <% else %>
    <%= render "aggregated_reactions", notification: notification, siblings: siblings %>

<% end %>
</div>
